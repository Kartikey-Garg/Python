name: Run My Selenium Script

# Triggers the workflow on push to 'master' or manually
on:
  push:
    branches: [ "master" ]
  workflow_dispatch:

jobs:
  run-my-script:
    # Use the free Ubuntu VM
    runs-on: ubuntu-latest

    steps:
      # 1. Checks out your repository's code
      - name: Check out code
        uses: actions/checkout@v4

      # 2. Sets up Python
      - name: Set up Python 3.10
        uses: actions/setup-python@v5
        with:
          python-version: '3.10'

      # 3. Installs the browser and virtual screen (xvfb)
      - name: Install system dependencies
        run: |
          sudo apt-get update
          sudo apt-get install -y xvfb chromium-browser chromium-chromedriver
          
      # 4. Installs your script's Python libraries
      - name: Install Python dependencies
        run: pip install selenium webdriver-manager
        
      # 5. Runs your script inside the virtual screen
      # The 'xvfb-run' command is the key to making Selenium work
      - name: Run Python Script
        run: xvfb-run python Python-Selenium/Google_Search.py
